image: daocloud/ci-golang:1.4
services:
    - mongodb
    # - mysql
    # - redis

env:
    - GOPATH = /gopath
install:
    - echo "This is an install segment"
    - sudo apt-get -y install curl
    # - echo "Here, we usually run scripts to setup a base environment"

before_script:
    - mkdir -p gopath
    - export GOPATH=/gopath
    - export PATH=$GOPATH/bin:$PATH
    - go env
    - go get github.com/revel/cmd/revel
    - revel new app
    - revel run app &
    # - echo "This is an before_script segment"
    # - echo "Here, we usually run scripts to prepare our test"

script:
    # - ping -c 2 mongodb
    # - ping -c 2 mysql
    # - ping -c 2 redis
    # - ping baidu.com &
    - curl http://localhost:9000
    - ping google.com -t -n 3
